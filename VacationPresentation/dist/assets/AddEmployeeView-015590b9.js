import{_ as h,o as c,c as u,a as s,b as r,v as a,n as o,t as m,w as y}from"./index-8da96a42.js";const f={data(){return{tempSkill:"",skills:[],url:null,profilePic:null,employee:{name:"",phone:"",email:"",salary:"",dateHired:""},successMsg:"",errMsg:"",nameErr:!1,emailErr:!1,phoneErr:!1,salaryErr:!1,dateErr:!1}},methods:{async submitForm(){if(console.log("add employee submit clicked"),this.successMsg="",this.errMsg="",this.nameErr=!1,this.emailErr=!1,this.phoneErr=!1,this.salaryErr=!1,this.dateErr=!1,this.employee.name==""&&(this.nameErr=!0),this.employee.email==""&&(this.emailErr=!0),this.employee.phone==""&&(this.phoneErr=!0),this.employee.salary==""&&(this.salaryErr=!0),this.employee.dateHired==""&&(this.dateErr=!0),this.nameErr||this.phoneErr||this.emailErr||this.salaryErr||this.dateErr){this.errMsg="Please fill in the required fields.";return}if(this.url==null){this.errMsg="Please select a file.";return}var i=this.employee.dateHired;let e=new FormData;e.append("file",this.profilePic),e.append("Name",this.employee.name),e.append("Phone",this.employee.phone),e.append("Email",this.employee.email),e.append("Salary",this.employee.salary),e.append("HiredDate",i),e.append("IsVacationAllowed",!0);const d={method:"POST",headers:{Accept:"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:e};try{const l=await(await fetch("http://localhost:5242/api/employee",d)).json();l.message&&(this.successMsg=l.message),console.log(l)}catch(n){console.log(n.message)}},addSkill(i){i.key===","&&this.tempSkill&&(this.skills.push(this.tempSkill),this.tempSkill="")},handleFileChange(i){console.log("file change");const e=i.target.files[0];this.url=URL.createObjectURL(e),this.profilePic=i.target.files[0]}}},_={class:"add-emp-container"},g=s("h2",{class:"form-title"},"Add Employee",-1),E={class:"container-1"},b=s("label",null,"Name",-1),v=s("label",null,"Phone",-1),k=s("label",null,"Email",-1),F=s("label",null,"Salary",-1),M=s("label",null,"Date Hired",-1),P={class:"btn-msg"},S=s("button",{type:"submit"},"Add Employee",-1),w={class:"success-msg-cont"},V={class:"err-msg-cont1"},H={class:"container-2"},x={class:"file-container"},A=s("label",null,"Profile Picture",-1),D={class:"image-preview"},U=["src"];function j(i,e,d,n,l,p){return c(),u("div",_,[g,s("form",{class:"add-emp-form",enctype:"multipart/form-data",onSubmit:e[6]||(e[6]=y((...t)=>p.submitForm&&p.submitForm(...t),["prevent"]))},[s("div",E,[b,r(s("input",{type:"text",placeholder:"Name","onUpdate:modelValue":e[0]||(e[0]=t=>l.employee.name=t),class:o(this.nameErr?"errField":"")},null,2),[[a,l.employee.name]]),v,r(s("input",{type:"text",placeholder:"Phone","onUpdate:modelValue":e[1]||(e[1]=t=>l.employee.phone=t),class:o(this.phoneErr?"errField":"")},null,2),[[a,l.employee.phone]]),k,r(s("input",{type:"email",placeholder:"Email","onUpdate:modelValue":e[2]||(e[2]=t=>l.employee.email=t),class:o(this.emailErr?"errField":"")},null,2),[[a,l.employee.email]]),F,r(s("input",{type:"number",placeholder:"500",min:"500",step:"100","onUpdate:modelValue":e[3]||(e[3]=t=>l.employee.salary=t),class:o(this.salaryErr?"errField":"")},null,2),[[a,l.employee.salary]]),M,r(s("input",{type:"date",placeholder:"Date Hired","onUpdate:modelValue":e[4]||(e[4]=t=>l.employee.dateHired=t),class:o(this.dateErr?"errField":"")},null,2),[[a,l.employee.dateHired]]),s("div",P,[S,s("div",w,[s("h3",null,m(this.successMsg),1)]),s("div",V,[s("h3",null,m(this.errMsg),1)])])]),s("div",H,[s("div",x,[A,s("input",{type:"file",accept:".png, .jpg",onChange:e[5]||(e[5]=t=>p.handleFileChange(t))},null,32),s("div",D,[s("img",{src:l.url},null,8,U)])])])],32)])}const C=h(f,[["render",j]]);export{C as default};
