import{_ as m,o,c as a,a as e,b as n,v as d,n as c,i as D,F as _,f as E,t as h,h as p,w as f}from"./index-8da96a42.js";const v={data(){return{vacations:[],empID:"",selectedVacType:"",selectedVacID:"",startDate:"",expEndDate:"",isValid:!0,isSuccess:!1,errMsg:"",successMsg:"",empErr:!1,vacErr:!1,startDateErr:!1,expEndDateErr:!1}},mounted(){const l={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`}};fetch("http://localhost:5242/api/vacation",l).then(s=>s.json()).then(s=>{this.vacations=s,console.log(this.vacations)}).catch(s=>console.log(s.message))},methods:{submitForm(){console.log("request submit is clicked"),this.errMsg="",this.successMsg="",this.isValid=!0,this.isSuccess=!1,this.empErr=!1,this.vacErr=!1,this.startDateErr=!1,this.expEndDateErr=!1;var l=this.startDate,s=this.expEndDate;if(this.empID==""&&(this.empErr=!0),this.selectedVacID==""&&(this.vacErr=!0),this.startDate==""&&(this.startDateErr=!0),this.expEndDate==""&&(this.expEndDateErr=!0),this.empErr||this.vacErr||this.startDateErr||this.expEndDateErr){this.errMsg="Please fill in the required fields.",this.isValid=!1;return}fetch("http://localhost:5242/api/request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify({EmployeeID:this.empID,VacationID:this.selectedVacID,StartDate:l,ExpectedEndDate:s})}).then(i=>i.json()).then(i=>{i.errorMessage!=null?(console.log(i.errorMessage),this.errMsg=i.errorMessage,this.isValid=!1):(console.log(i.message,"testestwaesfasdfsdf"),this.successMsg=i.message,this.isSuccess=!0),console.log(i)}).catch(i=>console.log(i))}}},g={class:"add-req-container"},V=e("h2",{class:"form-title"},"Add Request",-1),y={class:"req-container-parent"},x={class:"req-container-1"},b=e("label",null,"Employee ID",-1),I=e("label",null,"Vacation Type",-1),M=e("option",{value:"",disabled:""},"Select vacation",-1),q=["value"],S=e("label",null,"Start Date",-1),F={class:"req-container-2"},k=e("label",null,"Expected End Date",-1),T=e("label",null,"Actual End Date",-1),w=e("input",{type:"date"},null,-1),A={class:"btn-err-req"},B=e("div",null,[e("button",{type:"submit"},"Add Request")],-1),j={key:0,class:"success-msg-container2"},C={class:"success-msg"},R={class:"err-msg-container"},U={key:0,class:"error-msg2"};function z(l,s,i,N,t,u){return o(),a("div",g,[V,e("form",{class:"add-req-form",onSubmit:s[4]||(s[4]=f((...r)=>u.submitForm&&u.submitForm(...r),["prevent"]))},[e("div",y,[e("div",x,[b,n(e("input",{type:"text",placeholder:"Employee ID here..","onUpdate:modelValue":s[0]||(s[0]=r=>t.empID=r),class:c(this.empErr?"errField":"")},null,2),[[d,t.empID]]),I,n(e("select",{"onUpdate:modelValue":s[1]||(s[1]=r=>t.selectedVacID=r),class:c(this.vacErr?"errField":"")},[M,(o(!0),a(_,null,E(t.vacations,r=>(o(),a("option",{key:r.vacationID,value:r.vacationID},h(r.name),9,q))),128))],2),[[D,t.selectedVacID]]),S,n(e("input",{type:"date","onUpdate:modelValue":s[2]||(s[2]=r=>t.startDate=r),class:c(this.startDateErr?"errField":"")},null,2),[[d,t.startDate]])]),e("div",F,[k,n(e("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=r=>t.expEndDate=r),class:c(this.expEndDateErr?"errField":"")},null,2),[[d,t.expEndDate]]),T,w])]),e("div",A,[B,t.isSuccess?(o(),a("div",j,[e("div",C,[e("p",null,h(t.successMsg),1)])])):p("",!0),e("div",R,[t.isValid?p("",!0):(o(),a("div",U,[e("p",null,h(t.errMsg),1)]))])])],32)])}const P=m(v,[["render",z]]);export{P as default};
