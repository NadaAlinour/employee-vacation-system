import{_ as v,o,c as r,a as e,b as a,v as u,h as d,F as _,f as b,i as O,t as g,w as f,j as m}from"./index-ae2095e2.js";const y={created(){this.fetchUnits()},data(){return{count:1,addHireRuleCount:0,showDuration:!1,showMessage:!1,successMsg:"",errMsg:"",selectedUnit:"",toggleOptions1:null,toggleOptions2:null,toggleOptions34:!1,units:[],vacation:{name:null,description:null,isBasedOnHire:!1},hireObject:{numberOfDays:null,startYears:null,endYears:null},hire:[],rule:{numberOfTimes:null,duration:null,unitID:null,startDate:null,endDate:null}}},methods:{handleDays(l){this.hireObject.numberOfDays=l.target.value},handleStartYrs(l){this.hireObject.startYears=l.target.value},handleEndYrs(l){this.hireObject.endYears=l.target.value},addHireRule(){console.log(this.hireObject),this.hire.push({...this.hireObject}),console.log(this.hire),this.hireObject.numberOfDays=null,this.hireObject.startYears=null,this.hireObject.endYears=null,this.count+=1},addLastHireRule(){console.log(this.hireObject),this.hire.push({...this.hireObject}),console.log(this.hire),this.hireObject.numberOfDays=null,this.hireObject.startYears=null,this.hireObject.endYears=null},handleDuration(l){l.target.value=="true"?this.showDuration=!0:(this.showDuration=!1,this.rule.duration=null)},renderGroupOne(l){l.target.value==="false"?(this.toggleOptions1=!1,this.vacation.isBasedOnHire=!1,this.hire.length=0,this.count=1):(this.toggleOptions1=!0,this.vacation.isBasedOnHire=!0,this.toggleOptions34=!1,this.rule.startDate=null,this.rule.endDate=null,this.rule.unitID=null,this.rule.numberOfTimes=null)},renderGroupTwo(l){l.target.value==="false"?(this.toggleOptions2=!1,this.toggleOptions34=!0,this.rule.startDate=null,this.rule.endDate=null):(this.toggleOptions2=!0,this.toggleOptions34=!0,this.rule.unitID=null)},async addVacation(){this.successMsg="",this.errMsg="",this.hireObject.numberOfDays!==null&&this.addLastHireRule();var l=this.rule.startDate,t=this.rule.endDate;try{const c=await(await fetch("http://localhost:5242/api/vacation",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`},body:JSON.stringify({vacation:{name:this.vacation.name,description:this.vacation.description,isBasedOnHire:this.vacation.isBasedOnHire},hires:this.hire,rule:{numberOfTimes:this.rule.numberOfTimes,duration:this.rule.duration,unitID:this.rule.unitID,startDate:l,endDate:t}})})).json();console.log(c,"ttyfktflyg"),c.error!=null?this.errMsg=c.error:this.successMsg=c.message}catch(h){console.log(h.message)}},async fetchUnits(){const l={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.$store.state.token}`}};try{const h=await(await fetch("http://localhost:5242/api/unit",l)).json();this.units=h}catch(t){console.log(t.message)}},async submitForm(){console.log("add vacation is clicked"),this.successMsg="",this.showMessage=!0,await this.addVacation()}}},D={class:"add-vac-container"},w=e("h2",{class:"form-title"},"Add Vacation",-1),k=e("label",null,"Name",-1),j={class:"radio-group-duration"},T={id:"duration-group"},V={class:"radio-one"},C=e("label",null,"Set duration",-1),M={class:"radio-one"},U=e("label",null,"Depends on rule",-1),Y={key:0,class:"duration-container"},B=e("label",null,[m("Duration "),e("small",null,"in days")],-1),G=e("label",null,"Description",-1),H=e("label",null,"Rules",-1),S={class:"radio-group-1"},x={id:"group1"},N={class:"radio-one"},F=e("label",null,"Based on hire date",-1),I={class:"radio-two"},R=e("label",null,"Other",-1),A={key:1,class:"hire-rule-container-parent"},E=e("label",null,"Days",-1),L=e("label",null,[m("From "),e("small",null,"in years")],-1),z=e("label",null,[m("To "),e("small",null,"in years")],-1),P={key:2,class:"option-group-2"},J=e("label",null,"Number of times",-1),W={id:"group2"},q={class:"radio-one"},K=e("label",null,"Within period",-1),Q={class:"radio-two"},X=e("label",null,"Other",-1),Z={key:3,class:"option-group-3-4"},$={key:0,class:"option-group-3"},ee=e("label",null,"From",-1),te=e("label",null,"To",-1),se={key:1,class:"option-group-4"},ne=e("label",null,"Per",-1),ie=e("option",{value:"",disabled:""},"Select unit",-1),le=["value"],oe={class:"btn-msg2"},re=e("div",{class:"btn2"},[e("button",{type:"submit"},"Add Vacation")],-1),ae={class:"success-msg-cont"},ue={class:"err-msg-cont4"};function de(l,t,h,c,n,i){return o(),r("div",D,[w,e("form",{class:"add-vac-form",onSubmit:t[17]||(t[17]=f((...s)=>i.submitForm&&i.submitForm(...s),["prevent"]))},[k,a(e("input",{type:"text",placeholder:"Name","onUpdate:modelValue":t[0]||(t[0]=s=>n.vacation.name=s)},null,512),[[u,n.vacation.name]]),e("div",j,[e("fieldset",T,[e("div",V,[e("input",{type:"radio",onClick:t[1]||(t[1]=(...s)=>i.handleDuration&&i.handleDuration(...s)),value:"true",name:"duration-group"}),C]),e("div",M,[e("input",{type:"radio",onClick:t[2]||(t[2]=(...s)=>i.handleDuration&&i.handleDuration(...s)),value:"false",name:"duration-group"}),U])])]),n.showDuration?(o(),r("div",Y,[B,a(e("input",{type:"number",placeholder:"1",min:"1","onUpdate:modelValue":t[3]||(t[3]=s=>n.rule.duration=s)},null,512),[[u,n.rule.duration]])])):d("",!0),G,a(e("input",{type:"text",placeholder:"Description","onUpdate:modelValue":t[4]||(t[4]=s=>n.vacation.description=s)},null,512),[[u,n.vacation.description]]),H,e("div",S,[e("fieldset",x,[e("div",N,[e("input",{type:"radio",name:"group1",onClick:t[5]||(t[5]=(...s)=>i.renderGroupOne&&i.renderGroupOne(...s)),value:"true"}),F]),e("div",I,[e("input",{type:"radio",name:"group1",onClick:t[6]||(t[6]=(...s)=>i.renderGroupOne&&i.renderGroupOne(...s)),value:"false"}),R])])]),this.toggleOptions1==!0?(o(),r("div",A,[(o(!0),r(_,null,b(n.count,s=>(o(),r("div",{class:"hire-rule-container",key:s},[E,e("input",{type:"number",min:"1",placeholder:"1",onChange:t[7]||(t[7]=p=>i.handleDays(p))},null,32),L,e("input",{type:"number",onChange:t[8]||(t[8]=p=>i.handleStartYrs(p))},null,32),z,e("input",{type:"number",onChange:t[9]||(t[9]=p=>i.handleEndYrs(p))},null,32)]))),128)),e("button",{id:"add-btn",type:"button",onClick:t[10]||(t[10]=(...s)=>i.addHireRule&&i.addHireRule(...s))},"+")])):d("",!0),n.toggleOptions1==!1?(o(),r("div",P,[J,a(e("input",{type:"number",min:"1",placeholder:"1","onUpdate:modelValue":t[11]||(t[11]=s=>n.rule.numberOfTimes=s)},null,512),[[u,n.rule.numberOfTimes]]),e("fieldset",W,[e("div",q,[e("input",{type:"radio",name:"group2",onClick:t[12]||(t[12]=(...s)=>i.renderGroupTwo&&i.renderGroupTwo(...s)),value:"true"}),K]),e("div",Q,[e("input",{type:"radio",name:"group2",onClick:t[13]||(t[13]=(...s)=>i.renderGroupTwo&&i.renderGroupTwo(...s)),value:"false"}),X])])])):d("",!0),n.toggleOptions34==!0?(o(),r("div",Z,[n.toggleOptions2==!0?(o(),r("div",$,[ee,a(e("input",{type:"date","onUpdate:modelValue":t[14]||(t[14]=s=>n.rule.startDate=s)},null,512),[[u,n.rule.startDate]]),te,a(e("input",{type:"date","onUpdate:modelValue":t[15]||(t[15]=s=>n.rule.endDate=s)},null,512),[[u,n.rule.endDate]])])):d("",!0),n.toggleOptions2==!1?(o(),r("div",se,[ne,a(e("select",{"onUpdate:modelValue":t[16]||(t[16]=s=>n.selectedUnit=s)},[ie,(o(!0),r(_,null,b(this.units,s=>(o(),r("option",{key:s.unitID,value:s.unitID},g(s.unitName),9,le))),128))],512),[[O,n.selectedUnit]])])):d("",!0)])):d("",!0),e("div",oe,[re,e("div",ae,[e("h3",null,g(this.successMsg),1)]),e("div",ue,[e("h3",null,g(this.errMsg),1)])])],32)])}const ce=v(y,[["render",de]]);export{ce as default};
